import{a as v}from"./read-BZCrnDQD.js";import{b as f,c as y,h as E}from"./header-vZF85M1c.js";async function I(o){const e=localStorage.getItem("listingId");try{const t=await fetch(`${f}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`,"X-Noroff-API-Key":y},body:JSON.stringify(o)});if(!t.ok)throw new Error(`Error: ${t.status} - ${t.statusText}`);return await t.json()}catch(t){throw console.error("Error creating post:",t),t}}async function h(){const o=await v();if(!o||!o.data){alert("Could not fetch data!");return}const e=o.data;document.getElementById("name").value=e.name||"",document.getElementById("age").value=e.age||"",document.getElementById("location").value=e.location||"",document.getElementById("species").value=e.species||"",document.getElementById("breed").value=e.breed||"",document.getElementById("gender").value=e.gender||"",document.getElementById("color").value=e.color||"",document.getElementById("size").value=e.size||"",document.getElementById("description").value=e.description||"",document.getElementById("image").value=e.image.url||""}async function B(o){o.preventDefault();const e=o.target,t=e.name.value,r=parseInt(e.age.value),s=e.location.value,c=e.species.value,i=e.breed.value,l=e.gender.value,d=e.color.value,u=e.size.value,m=e.description.value,g=e.image.value,p={name:t,age:r,location:s,species:c,breed:i,gender:l,color:d,size:u,description:m,image:{url:g}};try{await I(p)?window.location.href="/":console.error("Failed to create post")}catch(n){console.error("Error creating post:",n),alert(`There was an error creating the post: ${n.message}`)}}h();const a=document.forms.editListing;a?a.addEventListener("submit",B):console.error("Form not found");E();
