import{b as m,c as f,h}from"./header-vZF85M1c.js";async function v(o){try{const e=await fetch(m,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`,"X-Noroff-API-Key":f},body:JSON.stringify(o)});if(!e.ok)throw new Error(`Error: ${e.status} - ${e.statusText}`);return await e.json()}catch(e){throw console.error("Error creating post:",e),e}}async function w(o){o.preventDefault();const e=o.target,t=e.name.value,a=parseInt(e.age.value),s=e.location.value,n=e.species.value,c=e.breed.value,i=e.gender.value,l=e.color.value,u=e.size.value,d=e.body.value,g=e.mediaUrl.value,p={name:t,age:a,location:s,species:n,breed:c,gender:i,color:l,size:u,description:d,image:{url:g}};try{await v(p)?window.location.href="/":console.error("Failed to create post")}catch(r){console.error("Error creating post:",r),alert(`There was an error creating the post: ${r.message}`)}}const y=document.forms.createListing;y.addEventListener("submit",w);h();
